<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Language Selector</title>
<style>
  /* Styles remain the same */
</style>
</head>
<body>

<div class="dropdown" id="languageDropdown">
  <button onclick="toggleDropdown()">Select Language</button>
  <div class="dropdown-content" id="languageOptions">
    <!-- Language options will be dynamically added here -->
  </div>
</div>

<header>
  <h1>Welcome to Picatch World</h1>
</header>
<div class="container" id="content">
  <h2>About Picatch</h2>
  <p>Picatch is a fascinating Pokémon known for its lightning-fast speed and electrifying abilities. It's a favorite among trainers for its agility and strength in battles.</p>
  
  <h3>Features of Picatch:</h3>
  <ul>
      <li>Speedy movement</li>
      <li>Electric-type abilities</li>
      <li>Cute appearance</li>
      <li>Strong bond with trainers</li>
  </ul>
  
  <img src="Pokémon.gif" alt="Picatch Pokémon">
  
  <h3>Get your Picatch now!</h3>
  <p>Start your journey with Picatch today. Catch, train, and battle with this amazing Pokémon.</p>
</div>

<script>
  // Language data
  const languages = [
    {
      "name": "English",
      "code": "EN"
    },
    {
      "name": "German",
      "code": "DE"
    },
    {
      "name": "French",
      "code": "FR"
    },
    {
      "name": "Spanish",
      "code": "ES"
    },
    {
      "name": "Italian",
      "code": "IT"
    },
    {
      "name": "Portuguese",
      "code": "PT"
    }
  ];

  // Function to toggle dropdown
  function toggleDropdown() {
    const dropdownContent = document.getElementById("languageOptions");
    dropdownContent.classList.toggle("show");
  }

  // Function to handle language selection
  async function translatePageContent(code) {
    const elements = document.querySelectorAll('#content *');
    elements.forEach(async (element) => {
      if (element.nodeType === Node.TEXT_NODE && element.textContent.trim() !== "") {
        const translatedText = await translate(element.textContent, code);
        element.textContent = translatedText;
      }
    });
    toggleDropdown();
  }

  async function translate(text, code) {
    // translation logic here
    // make a GET request
    let apiUrl = "https://pluginxoxoxo.onrender.com/?text=" + encodeURIComponent(text) + "&target_lang=" + code;
    try {
        const response = await fetch(apiUrl);
        const data = await response.text(); // Get the response as plain text
        return data; // Return the translated text
    } catch (error) {
        console.error('Error fetching translation:', error);
        return text; // Return original text in case of error
    }
  }

  // Dynamically add language options to the dropdown
  const languageDropdown = document.getElementById("languageOptions");
  languages.forEach(language => {
    const option = document.createElement("a");
    option.textContent = language.name;
    option.onclick = () => translatePageContent(language.code);
    languageDropdown.appendChild(option);
  });

  // Close the dropdown if the user clicks outside of it
  window.onclick = function(event) {
    if (!event.target.matches('.dropdown button')) {
      const dropdowns = document.getElementsByClassName("dropdown-content");
      for (let i = 0; i < dropdowns.length; i++) {
        const dropdown = dropdowns[i];
        if (dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
        }
      }
    }
  }
</script>

</body>
</html>
